function cur_timestamp(){return(new Date).getTime()/1e3}function gimme_oneminute(e,t){return t&&0!==t?1===t?ts_date(e):ts_date(e)+" ("+ts_diff(e)+")":ts_diff(e)}function oneminute(){for(var e,t,n,a=document.getElementsByTagName("*"),o=0;o<a.length;o++)e=a[o],null!==e.getAttribute("data-timestamp")&&(t=parseInt(e.getAttribute("data-timestamp")),n=e.getAttribute("data-time-mode"),null===n||"0"===n?(e.innerHTML=gimme_oneminute(t),e.title=ts_date(t)):e.innerHTML="1"===n?gimme_oneminute(t,1):gimme_oneminute(t,2))}function ts_date(e){var t=new Date(1e3*e+6e4);return t.getDate()+" "+month_mapper[t.getMonth()]+" "+t.getFullYear()}function ts_diff(e){e=parseInt(e);var t=cur_timestamp(),n=t-e,a=0>n;n=Math.abs(n);var o,r=Math.floor(n/60),m=Math.floor(r/60),i=Math.floor(m/24),u=Math.floor(i/7),s=Math.floor(i/30),l=Math.floor(i/365),f=!0;return 25>n?o="few seconds":40>n?o="about 30 seconds":60>n?o="less than a minute":2>r?o="one minute":60>=r?o=r+" minutes":2>=m?o="one hour":24>m?o=m+" hours":2>i?(f=!1,o=a?"tomorrow":"yesterday"):o=1>u?i+" days":2>u?"one week":1>s?Math.floor(i/7)+" weeks":2>s?"a month":1>l?s+" months":2>l?"one year":100>l?l+" years":1e3===l?"a century":1e3>l?Math.floor(l/100)+" centuries":1e3===l?"a millennium":Math.floor(l/1e3)+" millennia",f?a?o+" from now":o+" ago":o}var oneminute_interval=10,month_mapper={0:"Jan",1:"Feb",2:"Mar",3:"Apr",4:"May",5:"Jun",6:"Jul",7:"Aug",8:"Sep",9:"Oct",10:"Nov",11:"Dec"};oneminute();var oneminute_rescanner=setInterval(oneminute,oneminute_interval);